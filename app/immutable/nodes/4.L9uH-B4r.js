import{s as ne,r as oe,o as ie}from"../chunks/scheduler.CMPXCr5a.js";import{S as ue,i as ce,e as a,s as y,b as Q,c as n,h as L,g as A,f as I,d as i,j as W,k as t,a as U,l as s,n as X,m as V,o as F,t as Y,q as Z,r as ee}from"../chunks/index.DKBHaLPB.js";import{g as fe,b as de}from"../chunks/entry.CUkLuh_7.js";import{E as me}from"../chunks/error_text.H7qrRaQ7.js";import{l as pe,r as he}from"../chunks/appwrite_service.B3a24EUN.js";import{L as _e}from"../chunks/lock.Bfec19Np.js";import{L as ge}from"../chunks/lock-filled.D_uuOlCX.js";function we(w){let c,l,r,v="Chnage password successfully click close button to login",d,m,f,p,q="Close",R,h,x="Change Password",D,k,o,b,T,S,_,z,C,B,G,g,H,$,J,E,te="Change Password",M,K,se;return T=new _e({}),B=new ge({}),$=new me({props:{textError:w[2]}}),{c(){c=a("dialog"),l=a("div"),r=a("p"),r.textContent=v,d=y(),m=a("div"),f=a("form"),p=a("button"),p.textContent=q,R=y(),h=a("h1"),h.textContent=x,D=y(),k=a("div"),o=a("form"),b=a("label"),Q(T.$$.fragment),S=y(),_=a("input"),z=y(),C=a("label"),Q(B.$$.fragment),G=y(),g=a("input"),H=y(),Q($.$$.fragment),J=y(),E=a("button"),E.textContent=te,this.h()},l(e){c=n(e,"DIALOG",{id:!0,class:!0});var u=L(c);l=n(u,"DIV",{class:!0});var O=L(l);r=n(O,"P",{class:!0,"data-svelte-h":!0}),A(r)!=="svelte-nmtlw8"&&(r.textContent=v),d=I(O),m=n(O,"DIV",{class:!0});var le=L(m);f=n(le,"FORM",{method:!0,class:!0});var re=L(f);p=n(re,"BUTTON",{class:!0,"data-svelte-h":!0}),A(p)!=="svelte-1bxsvem"&&(p.textContent=q),re.forEach(i),le.forEach(i),O.forEach(i),u.forEach(i),R=I(e),h=n(e,"H1",{class:!0,"data-svelte-h":!0}),A(h)!=="svelte-h1wh5c"&&(h.textContent=x),D=I(e),k=n(e,"DIV",{class:!0});var ae=L(k);o=n(ae,"FORM",{class:!0});var P=L(o);b=n(P,"LABEL",{class:!0});var N=L(b);W(T.$$.fragment,N),S=I(N),_=n(N,"INPUT",{type:!0,class:!0,placeholder:!0}),N.forEach(i),z=I(P),C=n(P,"LABEL",{class:!0});var j=L(C);W(B.$$.fragment,j),G=I(j),g=n(j,"INPUT",{type:!0,class:!0,placeholder:!0}),j.forEach(i),H=I(P),W($.$$.fragment,P),J=I(P),E=n(P,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),A(E)!=="svelte-134azvd"&&(E.textContent=te),P.forEach(i),ae.forEach(i),this.h()},h(){t(r,"class","py-4 text-center"),t(p,"class","btn w-full"),t(f,"method","dialog"),t(f,"class","w-full"),t(m,"class","modal-action"),t(l,"class","modal-box"),t(c,"id","modal_info"),t(c,"class","modal"),t(h,"class","m-10 text-2xl text-center"),t(_,"type","password"),t(_,"class","grow"),t(_,"placeholder","Password"),t(b,"class","input input-bordered flex items-center gap-2 w-full"),t(g,"type","password"),t(g,"class","grow"),t(g,"placeholder","Confirm Password"),t(C,"class","input input-bordered flex items-center gap-2 w-full"),t(E,"type","submit"),t(E,"class","btn btn-primary w-full"),t(o,"class","flex flex-col items-center justify-center gap-2 m-10 xl:w-2/4"),t(k,"class","w-full xl:flex flex-col items-center justify-center")},m(e,u){U(e,c,u),s(c,l),s(l,r),s(l,d),s(l,m),s(m,f),s(f,p),U(e,R,u),U(e,h,u),U(e,D,u),U(e,k,u),s(k,o),s(o,b),X(T,b,null),s(b,S),s(b,_),V(_,w[0]),s(o,z),s(o,C),X(B,C,null),s(C,G),s(C,g),V(g,w[1]),s(o,H),X($,o,null),s(o,J),s(o,E),M=!0,K||(se=[F(p,"click",w[4]),F(_,"input",w[5]),F(g,"input",w[6]),F(o,"submit",w[3])],K=!0)},p(e,[u]){u&1&&_.value!==e[0]&&V(_,e[0]),u&2&&g.value!==e[1]&&V(g,e[1]);const O={};u&4&&(O.textError=e[2]),$.$set(O)},i(e){M||(Y(T.$$.fragment,e),Y(B.$$.fragment,e),Y($.$$.fragment,e),M=!0)},o(e){Z(T.$$.fragment,e),Z(B.$$.fragment,e),Z($.$$.fragment,e),M=!1},d(e){e&&(i(c),i(R),i(h),i(D),i(k)),ee(T),ee(B),ee($),K=!1,oe(se)}}}function ve(w,c,l){let r="",v="",d="",m=null,f=null;{const x=new URL(window.location.href);m=x.searchParams.get("userId"),f=x.searchParams.get("secret")}ie(()=>{pe()});const p=()=>{if(r===""){l(2,d="Password is required");return}else if(v===""){l(2,d="Confirm Password is required");return}if(r!==v){l(2,d="Password does not match");return}if(m===null||f===null){l(2,d="Invalid link");return}if(!he(m,f,r)){l(2,d="Reset password failed");return}const x=document.getElementById("modal_info");x&&x.showModal()},q=()=>{fe(de+"/login")};function R(){r=this.value,l(0,r)}function h(){v=this.value,l(1,v)}return[r,v,d,p,q,R,h]}class Le extends ue{constructor(c){super(),ce(this,c,ve,we,ne,{})}}export{Le as component};
