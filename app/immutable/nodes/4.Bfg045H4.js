import{s as ne,r as oe,o as ie}from"../chunks/scheduler.CMPXCr5a.js";import{S as ue,i as ce,e as a,s as y,b as K,c as n,h as L,g as N,f as I,d,j as Q,k as t,a as W,l as s,n as X,m as j,o as A,t as Y,q as Z,r as ee}from"../chunks/index.BmEl37hB.js";import{g as fe,b as de}from"../chunks/entry.UiddvSgM.js";import{E as me}from"../chunks/error_text.L0qJezmK.js";import{l as pe,r as he}from"../chunks/appwrite_service.DdQUHsrL.js";import{L as _e}from"../chunks/lock.CrUg1Lb4.js";import{L as ge}from"../chunks/lock-filled.Dg1DQj_x.js";function we(v){let u,r,l,x="Chnage password successfully click close button to login",m,p,c,h,R="Close",O,f,o,te="Change Password",V,i,b,k,F,_,S,C,T,z,g,G,$,H,E,se="Change Password",U,J,re;return k=new _e({}),T=new ge({}),$=new me({props:{textError:v[2]}}),{c(){u=a("dialog"),r=a("div"),l=a("p"),l.textContent=x,m=y(),p=a("div"),c=a("form"),h=a("button"),h.textContent=R,O=y(),f=a("div"),o=a("h1"),o.textContent=te,V=y(),i=a("form"),b=a("label"),K(k.$$.fragment),F=y(),_=a("input"),S=y(),C=a("label"),K(T.$$.fragment),z=y(),g=a("input"),G=y(),K($.$$.fragment),H=y(),E=a("button"),E.textContent=se,this.h()},l(e){u=n(e,"DIALOG",{id:!0,class:!0});var w=L(u);r=n(w,"DIV",{class:!0});var B=L(r);l=n(B,"P",{class:!0,"data-svelte-h":!0}),N(l)!=="svelte-nmtlw8"&&(l.textContent=x),m=I(B),p=n(B,"DIV",{class:!0});var le=L(p);c=n(le,"FORM",{method:!0,class:!0});var ae=L(c);h=n(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),N(h)!=="svelte-1bxsvem"&&(h.textContent=R),ae.forEach(d),le.forEach(d),B.forEach(d),w.forEach(d),O=I(e),f=n(e,"DIV",{class:!0});var q=L(f);o=n(q,"H1",{class:!0,"data-svelte-h":!0}),N(o)!=="svelte-1o51lty"&&(o.textContent=te),V=I(q),i=n(q,"FORM",{class:!0});var P=L(i);b=n(P,"LABEL",{class:!0});var D=L(b);Q(k.$$.fragment,D),F=I(D),_=n(D,"INPUT",{type:!0,class:!0,placeholder:!0}),D.forEach(d),S=I(P),C=n(P,"LABEL",{class:!0});var M=L(C);Q(T.$$.fragment,M),z=I(M),g=n(M,"INPUT",{type:!0,class:!0,placeholder:!0}),M.forEach(d),G=I(P),Q($.$$.fragment,P),H=I(P),E=n(P,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),N(E)!=="svelte-134azvd"&&(E.textContent=se),P.forEach(d),q.forEach(d),this.h()},h(){t(l,"class","py-4 text-center"),t(h,"class","btn w-full"),t(c,"method","dialog"),t(c,"class","w-full"),t(p,"class","modal-action"),t(r,"class","modal-box"),t(u,"id","modal_info"),t(u,"class","modal"),t(o,"class","mt-10 text-2xl text-center"),t(_,"type","password"),t(_,"class","grow"),t(_,"placeholder","Password"),t(b,"class","input input-bordered flex items-center gap-2 w-full"),t(g,"type","password"),t(g,"class","grow"),t(g,"placeholder","Confirm Password"),t(C,"class","input input-bordered flex items-center gap-2 w-full"),t(E,"type","submit"),t(E,"class","btn btn-primary w-full"),t(i,"class","flex flex-col items-center justify-center gap-2 mt-4 m-10 xl:w-2/4"),t(f,"class","w-full xl:flex flex-col items-center justify-center")},m(e,w){W(e,u,w),s(u,r),s(r,l),s(r,m),s(r,p),s(p,c),s(c,h),W(e,O,w),W(e,f,w),s(f,o),s(f,V),s(f,i),s(i,b),X(k,b,null),s(b,F),s(b,_),j(_,v[0]),s(i,S),s(i,C),X(T,C,null),s(C,z),s(C,g),j(g,v[1]),s(i,G),X($,i,null),s(i,H),s(i,E),U=!0,J||(re=[A(h,"click",v[4]),A(_,"input",v[5]),A(g,"input",v[6]),A(i,"submit",v[3])],J=!0)},p(e,[w]){w&1&&_.value!==e[0]&&j(_,e[0]),w&2&&g.value!==e[1]&&j(g,e[1]);const B={};w&4&&(B.textError=e[2]),$.$set(B)},i(e){U||(Y(k.$$.fragment,e),Y(T.$$.fragment,e),Y($.$$.fragment,e),U=!0)},o(e){Z(k.$$.fragment,e),Z(T.$$.fragment,e),Z($.$$.fragment,e),U=!1},d(e){e&&(d(u),d(O),d(f)),ee(k),ee(T),ee($),J=!1,oe(re)}}}function ve(v,u,r){let l="",x="",m="",p=null,c=null;{const o=new URL(window.location.href);p=o.searchParams.get("userId"),c=o.searchParams.get("secret")}ie(()=>{pe()});const h=()=>{if(l===""){r(2,m="Password is required");return}else if(x===""){r(2,m="Confirm Password is required");return}if(l!==x){r(2,m="Password does not match");return}if(p===null||c===null){r(2,m="Invalid link");return}if(!he(p,c,l)){r(2,m="Reset password failed");return}const o=document.getElementById("modal_info");o&&o.showModal()},R=()=>{fe(de+"/login")};function O(){l=this.value,r(0,l)}function f(){x=this.value,r(1,x)}return[l,x,m,h,R,O,f]}class Le extends ue{constructor(u){super(),ce(this,u,ve,we,ne,{})}}export{Le as component};
