import{s as ne,r as oe,o as ue}from"../chunks/scheduler.CS4_fOFt.js";import{S as ie,i as ce,e as a,s as y,m as K,c as n,a as L,g as j,b as I,d,n as Q,f as t,j as W,k as s,p as X,o as q,l as A,t as Y,r as Z,u as ee}from"../chunks/index.FJVWEHr7.js";import{g as fe,b as de}from"../chunks/entry.CmNCu7mp.js";import{E as me}from"../chunks/error_text.Dg6NeRq0.js";import{l as pe,r as he}from"../chunks/appwrite_service.CTUym6hl.js";import{L as _e}from"../chunks/lock.Cq5vwgxb.js";import{L as ge}from"../chunks/lock-filled.BAavL_n-.js";function we(v){let i,r,l,b="Chnage password successfully click close button to login",m,p,c,h,R="Close",O,f,o,te="Change Password",V,u,x,k,F,_,S,C,T,z,g,G,$,H,E,se="Change Password",U,J,re;return k=new _e({}),T=new ge({}),$=new me({props:{textError:v[2]}}),{c(){i=a("dialog"),r=a("div"),l=a("p"),l.textContent=b,m=y(),p=a("div"),c=a("form"),h=a("button"),h.textContent=R,O=y(),f=a("div"),o=a("h1"),o.textContent=te,V=y(),u=a("form"),x=a("label"),K(k.$$.fragment),F=y(),_=a("input"),S=y(),C=a("label"),K(T.$$.fragment),z=y(),g=a("input"),G=y(),K($.$$.fragment),H=y(),E=a("button"),E.textContent=se,this.h()},l(e){i=n(e,"DIALOG",{id:!0,class:!0});var w=L(i);r=n(w,"DIV",{class:!0});var B=L(r);l=n(B,"P",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-nmtlw8"&&(l.textContent=b),m=I(B),p=n(B,"DIV",{class:!0});var le=L(p);c=n(le,"FORM",{method:!0,class:!0});var ae=L(c);h=n(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),j(h)!=="svelte-1bxsvem"&&(h.textContent=R),ae.forEach(d),le.forEach(d),B.forEach(d),w.forEach(d),O=I(e),f=n(e,"DIV",{class:!0});var D=L(f);o=n(D,"H1",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-1o51lty"&&(o.textContent=te),V=I(D),u=n(D,"FORM",{class:!0});var P=L(u);x=n(P,"LABEL",{class:!0});var M=L(x);Q(k.$$.fragment,M),F=I(M),_=n(M,"INPUT",{type:!0,class:!0,placeholder:!0}),M.forEach(d),S=I(P),C=n(P,"LABEL",{class:!0});var N=L(C);Q(T.$$.fragment,N),z=I(N),g=n(N,"INPUT",{type:!0,class:!0,placeholder:!0}),N.forEach(d),G=I(P),Q($.$$.fragment,P),H=I(P),E=n(P,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(E)!=="svelte-134azvd"&&(E.textContent=se),P.forEach(d),D.forEach(d),this.h()},h(){t(l,"class","py-4 text-center"),t(h,"class","btn w-full"),t(c,"method","dialog"),t(c,"class","w-full"),t(p,"class","modal-action"),t(r,"class","modal-box"),t(i,"id","modal_info"),t(i,"class","modal"),t(o,"class","mt-10 text-2xl text-center"),t(_,"type","password"),t(_,"class","grow"),t(_,"placeholder","Password"),t(x,"class","input input-bordered flex items-center gap-2 w-full"),t(g,"type","password"),t(g,"class","grow"),t(g,"placeholder","Confirm Password"),t(C,"class","input input-bordered flex items-center gap-2 w-full"),t(E,"type","submit"),t(E,"class","btn btn-primary w-full"),t(u,"class","flex flex-col items-center justify-center gap-2 mt-4 m-10 md:w-2/4"),t(f,"class","w-full md:flex flex-col items-center justify-center")},m(e,w){W(e,i,w),s(i,r),s(r,l),s(r,m),s(r,p),s(p,c),s(c,h),W(e,O,w),W(e,f,w),s(f,o),s(f,V),s(f,u),s(u,x),X(k,x,null),s(x,F),s(x,_),q(_,v[0]),s(u,S),s(u,C),X(T,C,null),s(C,z),s(C,g),q(g,v[1]),s(u,G),X($,u,null),s(u,H),s(u,E),U=!0,J||(re=[A(h,"click",v[4]),A(_,"input",v[5]),A(g,"input",v[6]),A(u,"submit",v[3])],J=!0)},p(e,[w]){w&1&&_.value!==e[0]&&q(_,e[0]),w&2&&g.value!==e[1]&&q(g,e[1]);const B={};w&4&&(B.textError=e[2]),$.$set(B)},i(e){U||(Y(k.$$.fragment,e),Y(T.$$.fragment,e),Y($.$$.fragment,e),U=!0)},o(e){Z(k.$$.fragment,e),Z(T.$$.fragment,e),Z($.$$.fragment,e),U=!1},d(e){e&&(d(i),d(O),d(f)),ee(k),ee(T),ee($),J=!1,oe(re)}}}function ve(v,i,r){let l="",b="",m="",p=null,c=null;{const o=new URL(window.location.href);p=o.searchParams.get("userId"),c=o.searchParams.get("secret")}ue(()=>{pe()});const h=()=>{if(l===""){r(2,m="Password is required");return}else if(b===""){r(2,m="Confirm Password is required");return}if(l!==b){r(2,m="Password does not match");return}if(p===null||c===null){r(2,m="Invalid link");return}if(!he(p,c,l)){r(2,m="Reset password failed");return}const o=document.getElementById("modal_info");o&&o.showModal()},R=()=>{fe(de+"/login")};function O(){l=this.value,r(0,l)}function f(){b=this.value,r(1,b)}return[l,b,m,h,R,O,f]}class Le extends ie{constructor(i){super(),ce(this,i,ve,we,ne,{})}}export{Le as component};
